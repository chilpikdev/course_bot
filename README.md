# Django + Telegram Bot + Celery: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

## ‚¨áÔ∏è 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone https://github.com/chilpikdev/course_bot.git
cd course_bot
```

## üêç 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv .venv
source .venv/bin/activate
```

## üì• 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

```bash
pip install -r requirements.txt
```

## ‚öôÔ∏è 4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
python manage.py migrate
python manage.py collectstatic
python manage.py createsuperuser
```

## üöÄ 5. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ PM2

```bash
pm2 start .venv/bin/python --name django_server -- \
  -m uvicorn course_bot_project.asgi:application --host 0.0.0.0 --port 8000
```
```bash
pm2 start .venv/bin/python --name telegram_bot -- bot_polling.py
```
```bash
pm2 start .venv/bin/python --name celery_worker -- \
  -m celery -A course_bot_project worker --loglevel=info
```

## üìÑ 6. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
pm2 logs          # –≤—Å–µ –ª–æ–≥–∏
pm2 logs django_server
pm2 logs telegram_bot
pm2 logs celery_worker
```

## üõë 7. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
pm2 stop all
pm2 restart all
pm2 delete all
```


---

## ‚öôÔ∏è 8. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ (Linux)

```bash
pm2 startup
```

–ö–æ–º–∞–Ω–¥–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –Ω—É–∂–Ω—É—é –∫–æ–º–∞–Ω–¥—É `systemctl enable pm2-root`, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É **`pm2 save`**:

```bash
pm2 save
```

---

### üîÅ –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞

```bash
pm2 start ecosystem.config.js
pm2 save
pm2 startup     # –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
```

---

### üìå –í–∞–∂–Ω–æ

* –ï—Å–ª–∏ –≤—ã –æ–±–Ω–æ–≤–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç –∏ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ `pm2 restart`, –Ω–æ –∑–∞–±—ã–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `pm2 save`, —Ç–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

* Redis-—Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω:

  ```bash
  redis-server
  ```
